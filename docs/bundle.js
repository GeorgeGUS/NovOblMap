!function(n){var o={};function c(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=n,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c(c.s=9)}([function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={converterCoords:function(e){var t=myMap.options.get("projection");return myMap.converter.globalToPage(t.toGlobalPixels(e,myMap.getZoom()))},convertPixels:function(e){return myMap.options.get("projection").fromGlobalPixels(myMap.converter.pageToGlobal(e),myMap.getZoom()).join(", ")},delay:function(n,o){return function(){var e=this,t=arguments;setTimeout(function(){n.apply(e,t)},o)}}}},function(e,t,n){"use strict";function o(e,t){var n={"Великий Новгород":"pin-vn","Пролетарий":"pin-pr","Боровичи":"pin-br","Залучье":"pin-zl"},o=t?"active":"";if(t){var c=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(c=(i=s.next()).done);c=!0){f=i.value;console.log(f),console.log(pinsBrObject.objects.getById(f.name).properties),pinsBrObject.objects.getById(f.name).properties.activeClass=o}}catch(e){r=!0,a=e}finally{try{c||null==s.return||s.return()}finally{if(r)throw a}}myMap.geoObjects.add(pinsBrObject)}else{console.log("before clean pinsBrObject",pinsBrObject);var u={type:"FeatureCollection",features:[]},l=!0,m=!1,h=void 0;try{for(var p,d=e[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f,y=n[(f=p.value).ceh],x=f.ceh===f.name?"pin-main":"";u.features.push({type:"Feature",id:f.name,geometry:{type:"Point",coordinates:[f.lat,f.len]},properties:{activeClass:o,iconClass:y,mainClass:x,pinLabel:f.name}})}}catch(e){m=!0,h=e}finally{try{l||null==d.return||d.return()}finally{if(m)throw h}}pinsBrObject.add(u),pinsBrObject.objects.options.set({mainClass:x,iconLayout:ymaps.templateLayoutFactory.createClass('<div class="pin $[properties.iconClass] $[properties.mainClass] $[properties.activeClass]">\n          {{ properties.pinLabel }}\n        </div>')}),console.log("before data pinsBrObject",pinsBrObject),console.log("pinsBrObject.objects",pinsBrObject.objects),console.log("pinsBrObject.objects.getById",pinsBrObject.objects.getById("Боровичи").properties),console.log("pinsBrObject.getObjectState",pinsBrObject.getObjectState("Боровичи")),myMap.geoObjects.add(pinsBrObject)}}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=[{ceh:"Боровичи",name:"Анциферово",lat:58.966335,len:34.024697,ch1mux:26,ch2mux:46},{ceh:"Великий Новгород",name:"Батецкий",lat:58.64474,len:30.301729,ch1mux:43,ch2mux:44},{ceh:"Боровичи",name:"Ближнее Заполье",lat:59.104938,len:33.30397,ch1mux:26,ch2mux:46},{ceh:"Боровичи",name:"Боровичи",lat:58.388219,len:33.914025,ch1mux:26,ch2mux:46},{ceh:"Пролетарий",name:"Яжелбицы",lat:58.036126,len:32.959888,ch1mux:51,ch2mux:57},{ceh:"Пролетарий",name:"Валдай",lat:57.980199,len:33.246667,ch1mux:51,ch2mux:57},{ceh:"Великий Новгород",name:"Великий Новгород",lat:58.52281,len:31.269915,ch1mux:30,ch2mux:58},{ceh:"Боровичи",name:"Висленев Остров",lat:58.701964,len:33.08559,ch1mux:26,ch2mux:46},{ceh:"Великий Новгород",name:"Волот",lat:57.927807,len:30.70677,ch1mux:40,ch2mux:29},{ceh:"Великий Новгород",name:"Воронино",lat:58.565688,len:30.597032,ch1mux:43,ch2mux:44},{ceh:"Боровичи",name:"Кабожа",lat:58.803774,len:35.028403,ch1mux:51,ch2mux:57},{ceh:"Боровичи",name:"Лубенское",lat:58.629409,len:35.108937,ch1mux:51,ch2mux:57},{ceh:"Боровичи",name:"Глухачи",lat:58.614241,len:35.422108,ch1mux:51,ch2mux:57},{ceh:"Залучье",name:"Залучье",lat:57.667865,len:31.765021,ch1mux:51,ch2mux:57},{ceh:"Залучье",name:"Ильина Гора",lat:57.581332,len:32.652665,ch1mux:51,ch2mux:57},{ceh:"Боровичи",name:"Калитино",lat:58.93598,len:33.411031,ch1mux:26,ch2mux:46},{ceh:"Залучье",name:"Лычково",lat:57.921493374063736,len:32.423002282538064,ch1mux:51,ch2mux:57},{ceh:"Боровичи",name:"Любытино",lat:58.815748,len:33.393892,ch1mux:26,ch2mux:46},{ceh:"Пролетарий",name:"Малая Вишера",lat:58.845758,len:32.217664,ch1mux:30,ch2mux:58},{ceh:"Пролетарий",name:"Мелехово",lat:59.098917,len:31.935737,ch1mux:30,ch2mux:58},{ceh:"Пролетарий",name:"Мокрый Остров",lat:58.187197,len:32.487518,ch1mux:51,ch2mux:57},{ceh:"Боровичи",name:"Мошенское",lat:58.511464,len:34.593187,ch1mux:26,ch2mux:46},{ceh:"Пролетарий",name:"Новинка",lat:57.801658,len:33.082419,ch1mux:51,ch2mux:57},{ceh:"Великий Новгород",name:"Новое Овсино",lat:58.491838,len:30.28935,ch1mux:43,ch2mux:44},{ceh:"Залучье",name:"Переходы",lat:57.665208,len:30.867281,ch1mux:40,ch2mux:29},{ceh:"Боровичи",name:"Пестово",lat:58.595347,len:35.800685,ch1mux:51,ch2mux:57},{ceh:"Залучье",name:"Полново",lat:57.534352,len:32.948273,ch1mux:51,ch2mux:57},{ceh:"Пролетарий",name:"Пролетарий",lat:58.437358,len:31.708167,ch1mux:30,ch2mux:58},{ceh:"Великий Новгород",name:"Старая Каменка",lat:58.208834,len:30.093733,ch1mux:40,ch2mux:29},{ceh:"Залучье",name:"Старая Русса",lat:58.00852713133914,len:31.359131990765995,ch1mux:51,ch2mux:57},{ceh:"Великий Новгород",name:"Тёсовский",lat:58.791396,len:30.875761,ch1mux:30,ch2mux:58},{ceh:"Залучье",name:"Тугино",lat:57.409961,len:31.048947,ch1mux:23,ch2mux:24},{ceh:"Боровичи",name:"Угловка",lat:58.214007,len:33.517688,ch1mux:26,ch2mux:46},{ceh:"Боровичи",name:"Хвойная",lat:58.896645,len:34.491507,ch1mux:26,ch2mux:46},{ceh:"Залучье",name:"Холм",lat:57.145202,len:31.178781,ch1mux:23,ch2mux:24}]},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function o(){ymaps.borders.load("RU",{quality:2}).then(function(e){var t=e.features[32];t.id=t.properties.iso3166,t.options={strokeWidth:4,strokeColor:"#ff4500",strokeOpacity:.6,fillColor:"#ffd530",fillOpacity:.4,openHintOnHover:!1};var n=new ymaps.ObjectManager;n.add(t),myMap.geoObjects.add(n);var o=t.geometry.coordinates[0],c=ymaps.util.bounds.fromPoints(o);ymaps.util.requireCenterAndZoom(myMap.getType(),c,myMap.container.getSize(),{margin:5,preciseZoom:!0}).then(function(e){myMap.setCenter(e.center,e.zoom);var t=new Event("updateZoom");window.dispatchEvent(t)})},function(e){console.log(e)})}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var x=n(6),v=n(0);function o(e){var t=new TimelineLite({paused:!0}),n=new TimelineLite({paused:!0}),o=new TimelineLite({paused:!0}),c=new TimelineLite({paused:!0}),r=".ded-big",a=".ded-leaving",i=".deer",s=document.querySelector(r),u=document.getElementById("canvas").querySelector("#ded-launch-btn");t.set(r,{x:0,y:0});var l=Object(x.a)(e,s),m={start:v.a.converterCoords(points[0][0]),end:v.a.converterCoords(points[points.length-1][1])},h={x:m.start[0],y:m.start[1]},p={x:m.end[0],y:m.end[1]};t.to(r,2.7,{bezier:{values:[{x:h.x/1.7,y:h.y/2.7},h]},scale:1,ease:Sine.easeOut}).eventCallback("onComplete",function(){t.set(r,{visibility:"hidden"}),l()});var d={x:innerWidth+300,y:innerHeight/2+200};o.set(a,p),o.set(i,d),n.to(a,2.7,{bezier:{values:[{x:p.x+170,y:p.y-70},{x:p.x+300,y:p.y+230}]},rotation:"+=360",rotationY:180,scale:1.5,ease:Power2.easeInOut}),o.to(i,2.7,{x:p.x+300,y:p.y+230,visibility:"visible"}).set(i,{className:"+=deer-stay"}).eventCallback("onComplete",function(){n.restart().eventCallback("onComplete",function(){c.restart()})});var f=[i,a];c.set(f,{x:p.x+300,y:p.y+230,className:"-=deer-stay"}).to(f,5,{x:-50,y:p.y+400,ease:Linear.easeNone});var y=!1;u.addEventListener("click",function(){y||(y=!0,t.restart())}),s.addEventListener("launchLeaving",function(){o.restart()}),window.addEventListener("keydown",function(e){"Enter"!==e.key||y||(y=!0,t.restart())})}},function(e,t,n){"use strict";(function(u){n.d(t,"a",function(){return e});var l=n(7),m=n(8),h=n(1),p=n(0);function e(e,n){var o=new l.a({iconLayout:ymaps.templateLayoutFactory.createClass('<div class="ded ded-$[properties.direction]"></div>')});myMap.geoObjects.add(o);var t,c={};e.forEach(function(e){c.hasOwnProperty(e.ceh)?c[e.ceh].pins.push(e):c[e.ceh]={pins:[e]},e.ceh===e.name&&(c[e.ceh].coords=[e.lat,e.len])}),u.points=[[(t=c["Боровичи"].coords,[t[0]-5e-5,t[1]-5e-5]),c["Боровичи"].coords],[c["Боровичи"].coords,c["Залучье"].coords],[c["Залучье"].coords,c["Пролетарий"].coords],[c["Пролетарий"].coords,c["Великий Новгород"].coords]];var r=["Боровичи","Залучье","Пролетарий","Великий Новгород"],a=0,i=p.a.delay(function(e,t){e.properties.set("direction",""),Object(m.a)(c,r[t]),p.a.delay(function(e){if(Object(h.a)(c[r[e]].pins,!0),e+1<r.length)myMap.geoObjects.add(o);else{console.log("Карта запущена"),myMap.geoObjects.remove(o);var t=new Event("launchLeaving");n.dispatchEvent(t)}},200)(t)},1e3);function s(t){if(0==t.length)return null;ymaps.route(t.shift()).then(function(e){o.moveTo(e.getPaths().get(0).getSegments(),{speed:3e3,directions:2},function(e,t,n){e.geometry.setCoordinates(t),e.properties.set("direction",n.t)},function(e){e.properties.set("direction","jump"),i(e,a++),p.a.delay(s,1500)(t)})})}return function(){s(points)}}}).call(this,n(3))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(0);var x,o=(x={arrows:{w:"←",sw:"↙",s:"↓",se:"↘",e:"→",ne:"↗",n:"↑",nw:"↖"},classes:{16:["w","sww","sw","ssw","s","sse","se","see","e","nee","ne","nne","n","nnw","nw","nww"],8:["w","sw","s","se","e","ne","n","nw"],4:["w","s","e","n"],2:["w","e"]},n:function(e,t,n){var o=n>>1,c=(Math.floor(Math.atan2(e,t)/Math.PI*o+1/n)+o)%n;return{n:c,t:x.classes[n][c]}},16:function(e,t){return x.n(e,t,16)},8:function(e,t){return x.n(e,t,8)},4:function(e,t){return x.n(e,t,4)},2:function(e,t){return x.n(e,t,2)}},function(e){var t=new ymaps.GeoObject({geometry:{type:"Point"}},e);return t.coordSystem=e.coordSystem,t.waypoints=[],t.stop=function(){this.waypoints.length=0},t.moveTo=function(e,t,n,o){var c=this;if(e){(t=t||{}).coordSystem=t.coordSystem||this.coordSystem||this.getMap().options.get("projection").getCoordSystem(),t.speed=t.speed||Math.round(1e3/this.getMap().getZoom());var r=function(e,t){var n,o;(t=t||{}).directions=0<=[2,4,8,16].indexOf(t.directions)?t.directions:8,t.speed=t.speed||6;var c,r,a,i,s,u,l,m=[],h=x[t.directions],p=t.coordSystem;for(n=[],c=0,i=e.length;c<i;c++)for(r=0,a=(o=e[c].getCoordinates()).length;r<a;r++)u=o[r],s&&s[0].toPrecision(10)===u[0].toPrecision(10)&&s[1].toPrecision(10)===u[1].toPrecision(10)||(n.push(u),s=u);for(c=0,i=n.length-1;i;--i,++c){var d=n[c],f=n[c+1],y=[f[0]-d[0],f[1]-d[1]];for(l=h(y[0],y[1]),r=0,a=Math.round(p.distance(d,f));r<a;r+=t.speed)m.push({coords:[d[0]+y[0]*r/a,d[1]+y[1]*r/a],direction:l,vector:y})}return m}(e,t),a=[];this.waypoints=r.map(function(e,t){return a.push(e),2<=a.length&&e.direction.t!==a[a.length-2].direction.t&&(20<a.length?a=[e]:(e.direction.t=a[a.length-2].direction.t,a.splice(a.length-1,1,e))),a[a.length-1]});var i=setInterval(function(){if(0===c.waypoints.length)return o(c),clearTimeout(i);var e=c.waypoints.shift();n(c,e.coords,e.direction)},42)}},t})},function(e,t,n){"use strict";function o(n,o){n[o].pins.forEach(function(e,t){ymaps.route([n[o].coords,[e.lat,e.len]]).then(function(e){var t=e.getPaths();t.options.set({strokeWidth:6,strokeColor:"#87cefa"}),myMap.geoObjects.add(t)})})}n.d(t,"a",function(){return o})},function(e,t,r){"use strict";r.r(t),function(e){r(10);var t=r(2),n=r(4),o=r(1),c=r(5);ymaps.ready(function(){e.myMap=new ymaps.Map("map",{center:[58.19421684348514,32.92976749999997],controls:[],zoom:8.23},{avoidFractionalZoom:!1}),myMap.behaviors.disable(["drag","scrollZoom","dblClickZoom"]),Object(n.a)(),e.pinsBrObject=new ymaps.ObjectManager,Object(o.a)(t.a),window.addEventListener("updateZoom",function(){Object(c.a)(t.a)})})}.call(this,r(3))},function(e,t,n){}]);
//# sourceMappingURL=bundle.js.map